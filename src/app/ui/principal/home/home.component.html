<div class="container mx-auto p-4">
  <div class="flex items-center justify-between mb-4">
    <button
      class="btn btn-xs btn-secondary mx-3"
      [disabled]="currentPath.length <= 1"
      (click)="goBack()"
    >
      <svg
        class="w-[18px] h-[18px]"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="none"
        viewBox="0 0 24 24"
      >
        <path
          stroke="currentColor"
          stroke-linecap="round"
          stroke-linejoin="round"
          stroke-width="2"
          d="m15 19-7-7 7-7"
        />
      </svg>
    </button>
    <div class="breadcrumbs text-sm text-gray-900/70">
      <ul>
        @for (path of paths; track $index) {
        <li>
          <span class="bg-slate-200 rounded-md flex gap-2 px-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              class="h-4 w-4 stroke-current"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-6l-2-2H5a2 2 0 00-2 2z"
              ></path>
            </svg>
            {{ path }}
          </span>
        </li>
        }
      </ul>
    </div>
    <div class="dropdown dropdown-end">
      <div tabindex="0" role="button" class="btn btn-primary btn-sm m-1">
        <svg
          class="w-[18px] h-[18px]"
          aria-hidden="true"
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          height="24"
          fill="none"
          viewBox="0 0 24 24"
        >
          <path
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M5 12h14m-7 7V5"
          />
        </svg>
        Nuevo
      </div>
      <ul
        tabindex="0"
        class="dropdown-content menu bg-base-100 rounded-box z-[1] w-52 p-2 shadow"
      >
        <li (click)="createQuestionDialog()">
          <div class="flex">
            <app-icon class="text-xs" [icon]="'note_add'" />Crear Pregunta
          </div>
        </li>
        <li (click)="openDialog()">
          <div class="flex">
            <app-icon class="text-xs" [icon]="'create_new_folder'" />Crear
            Carpeta
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="flex">
    <div class="w-[70%] px-1">
      <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
      >
        @for ( folder of currentFolders; track $index) { @if (folder.type
        ===objectType.folder ) {

        <div
          class="card bg-slate-200 shadow-xl cursor-pointer hover:bg-slate-300 hover:shadow-2xl transition"
        >
          <div (click)="navigateToFolder(folder)" class="card-body">
            <div class="my-2">
              <h2 class="break-words card-title">
                {{ folder.name }}
              </h2>
              <app-icon
                class="text-slate-400 hover:text-slate-600"
                [icon]="'create'"
              />

              <app-icon
                class="text-slate-400 hover:text-slate-600"
                [icon]="'delete_outline'"
              />
            </div>
          </div>
        </div>

        } }
      </div>

      <div
        class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mt-4"
      >
        @for ( folder of currentFolders; track $index) { @if (folder.type
        ===objectType.question ) {

        <div
          class="card bg-slate-200 shadow-xl cursor-pointer hover:bg-slate-300 hover:shadow-2xl transition"
        >
          <div class="card-body">
            <h3 class="break-words card-title">
              {{ folder.name }}
            </h3>
          </div>
          <figure class="bg-slate-600">
            <div class="my-2">
              <app-icon
                (click)="navigateToFolder(folder)"
                class="text-slate-400 hover:text-white"
                [icon]="'create'"
              />
              @if (questionSelected(folder)) {
              <app-icon
                class="text-white"
                [icon]="'playlist_add_check'"
                (click)="removeQuestionCurrentExam(folder)"
              />
              }@else {
              <app-icon
                class="text-slate-400 hover:text-white"
                [icon]="'playlist_add'"
                (click)="addQuestionCurrentExam(folder)"
              />
              }

              <app-icon
                class="text-slate-400 hover:text-white"
                [icon]="'delete_outline'"
              />
            </div>
          </figure>
        </div>

        } }
      </div>
    </div>
    <div class="w-[30%]">
      <div class="flex text-center justify-between text-gray-600 mt-2">
        <div class="flex text-center">
          <div class="indicator">
            <span
              *ngIf="questionsSelected.length > 0"
              class="indicator-item indicator-end badge badge-secondary"
              >{{ questionsSelected.length }}</span
            >
            <app-icon class="mt-1" [icon]="'list'" />
            <h2>Preguntas Seleccionadas</h2>
          </div>
        </div>
        <button
          [disabled]="questionsSelected.length < 1"
          (click)="showModalGenerateExam()"
          class="btn btn-sm btn-primary"
        >
          Generar examen
        </button>
      </div>
      <question-list />
    </div>
  </div>
</div>
